This extension provides a build task for updating PR titles with an indicator of
the PR size and test coverage.

It is designed to help engineers create PRs of an appropriate size, with
appropriate levels of test coverage. It furthermore helps reviewers understand
the time they will likely need to spend reviewing a PR, allowing for more
efficient time management.

![PR titles prefixed by size and test indicators](titles.png)

It also adds detailed metrics as a comment within the PR, highlights missing PR
descriptions, indicates files that may not need to be reviewed, and adds hidden
properties for programmatic access.

![Metrics comment](comment.png)

![Missing description indicator](description.png)

![Potentially ignorable file indicator](ignored.png)

## How to Use

After installing the extension, you can add the task to a new or existing
[build definition][build].

![Adding the PR Metrics task](task-add.png)

### Parameters

The task parameters are:

- **Base Size:** The maximum number of new lines in a small PR. If left blank,
  a default of `250` will be used.
- **Growth Rate:** The growth rate applied to the base size for calculating the
  size of larger PRs. If left blank, a default of `2.0` will be used. With a
  base size of `250` and a growth rate of `2.0`, `500` new lines would
  constitute a medium PR while `1000` new lines would constitute a large PR.
- **Test Factor:** The lines of test code expected for each line of product
  code. If left blank, a default of `1.5` will be used. This can be set to `0.0`
  in order to skip the reporting of whether the test code coverage is
  sufficient.
- **File Matching Patterns:** [Azure DevOps file matching patterns][globs]
  specifying the files and folders to include. Autogenerated files should
  typically be excluded. Excluded files will contain a comment to inform
  reviewers that they are unlikely to need to review those files. If left
  blank, a default of `**/*` (all files) will be used.
- **Code File Extensions:** Extensions for files containing code, so that
  non-code files can be excluded. If left blank,
  [a default set of file extensions will be used][defaultextensions].

![The PR Metrics task definition](task-definition.png)

## Source Code

The [source][github] for this extension is on GitHub. Take, fork, and extend.

## Feedback & Issues

A more thorough description of the extension can be found [here][readme].

If you have feedback or issues, please file an issue on [GitHub][issues].

[build]: https://docs.microsoft.com/azure/devops/pipelines/create-first-pipeline
[github]: https://github.com/microsoft/OMEX-Azure-DevOps-Extensions
[issues]: https://github.com/microsoft/OMEX-Azure-DevOps-Extensions/issues
[globs]: https://docs.microsoft.com/azure/devops/pipelines/tasks/file-matching-patterns
[defaultextensions]: https://github.com/microsoft/OMEX-Azure-DevOps-Extensions/blob/main/PipelinesTasks/PRMetrics/README.md#default-code-file-extensions
[readme]: https://github.com/microsoft/OMEX-Azure-DevOps-Extensions/blob/main/PipelinesTasks/PRMetrics/README.md
